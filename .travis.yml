language: java
sudo: required

install:
  - mvn install -DskipTests
  - mvn package -DskipTests
  - mvn wildfly-swarm:package

after_success:
  - zip xpto-systems.zip Dockerfile Dockerrun.aws.json target/cities-swarm.jar

deploy:
  skip_cleanup: true
  provider: elasticbeanstalk
  access_key_id: AKIAIYDUAKIJ2UOGI33Q
  secret_access_key:
    secure: "j4W7p6gSuPa76z0n3zkfbiKmJA0Wnxmp9v6FK4TPjtay0jjz0ETsmaID0GoigTdD4h44ZZiwTP3M5XPYi5/yigfpUlYo4oCdscj/TCVzMUIvmFinhFspqpKXs1f9OsiQ+X7g/Q9p9M/FIt6Is1DJPRKEyKPBoeCQG1fCK80Iqp/TOge27DBaHbltBkMOEEM1bw9YivJV4YuD4feQMo1zp5jaf+L4/dsfpwTmJWIllFr6U/IX9nTxIZRAVAyUSyeEmicrZThJ2k0pWKkzxhRKK+hNgmtI9FNNckqaDnkiU9w9LpC6WwKjhFpPBg5gdbrGwulkrg6ca/M3es36MzfURPQH+m9ymP+fMM9E9fQv2Ks1o7PYoyDvQ6jdnww8vUFRfforJQ4AaNTiX2EFvYMDOAQoqQdkt3Mt+HwLvCb4QLIzVYXv6Xex6HR7+Jt+dRvLu/0zg3anYiSotRSojfBDom+zy2MNOhZRpdQiRHyUfckCAq4Cl08wtdz53uO9Dzj1ZNYyX3UYYduXbW1A6/IIRn0++qoREjvL+AlfivuZgdo0su2+e59KmHFaleMV4cSHoyxfCcbcblZhDFpH7h/KjU5/+P9VSkl1RbyHth8aGfAkQeCDdOMWaosUfGbd4IHQ7glI1slln7kR98AAlgomTO4mkVNAPlh3gTyjipFVBf0"
  region: "us-east-1"
  app: "teste"
  env: "xpto-env"
  bucket_name: "elasticbeanstalk-us-east-1-591410694623"
  zip_file: "xpto-systems.zip"